# 스마트 컨트랙트와 솔리디티

- 컨트랙트 계정은 이더리움 가상 머신에 의해 실행되는 프로그램 코드가 제어한다.

- 컨트랙트 계정은 관련 코드와 데이터 저장소를 모두 갖고 있다.

<br>

## 스마트 컨트랙트란 무엇인가 ?
<hr>

- 당사자들이 다른 약속에 따라 수행하는 프로토콜을 포함하여 디지털 형식으로 지정된 일련의 약속

- 불변적인 컴퓨터 프로그램

<br>

### 컴퓨터 프로그램

- 스마트 컨트랙트는 단순히 컴퓨터 프로그램이다.

<br>

### 불변의

- 배포되면, 변경할 수 없다.

- 스마트 컨트랙트를 수정하는 유일한 방법은 새로운 인스턴스를 배포하는 것이다.

<br>

### 결정론적

- 실행을 시작한 트랜잭션의 컨트랙트와 실행 시점에 이더리움 블록체인의 상태가 동일하다.

<br>

### 탈중화된 월드 컴퓨터

- EVM의 모든 인스턴스는 동일한 초기 상태에서 작동하고 동일한 최종 상태를 생성하기 때문에 시스템 전체가 단일 월드 컴퓨터로 동작한다.

<br>

## 스마트 컨트랙트의 생명주기
<hr>

- 컨트랙트를 실행 하려면 EVM에서 실행되는 저수준의 바이트코드로 컴파일되어야 한다.

- 컨트랙트의 이더리움 주소는 트랙잭션에서 수신자로 사용되거나 컨트랙트에 자금을 보내거나 컨트랙트 함수를 호출하는 데 사용할 수 있다.

- 중요한 것은 컨트랙트가 트랜잭션에 의해 호출된 경우에만 실행된다는 것이다.

- 이더리움 월드 컴퓨터가 단일 스레드 컴퓨터라고 할 수 있다.

- 원자성, 트랜잭션은 모든 실행이 성공적으로 종료된 경우에만 글로벌 상태의 모든 변경사항이 기록되고 전체가 실행된다.

- 컨트랙트를 '삭제'하여 해당 주소에서 코드와 내부 상태(스토리지)를 삭제하고 빈 계정으로 남길 수 있다.

<br>

## 이더리움 고급 언어의 소개
<hr>

- EVM은 x86_64 같은 머신 코드를 실행하는 컴퓨터의 CPU와 유사한 EVM 바이트코드라는 특수한 형태의 코드를 실행하는 가상 머신이다.

- 스마트 컨트랙트에 가장 널리 사용되는 언어(솔리디티)는 명령형 언어이다.

<br>

## 솔리디티 컴파일러(solc)로 컴파일
<hr>

~~~shell
solc --optimize --bin Faucet.sol
~~~

- solc가 생성하는 결과는 이더리움 블록체인에서 실행될 수 있는 시리얼라이즈된 16진수 바이너리다.

<br>

## 이더리움 컨트랙트 ABI
<hr>

- 애플리케이션 바이너리 인터페이스(ABI)는 두 프로그램 모듈 간 또는 때때로 운영체제와 사용자 프로그램 간의 인터페이스다.

- ABI는 기계 코드와 데이터를 교환하기 위해 인코딩 및 디코딩하는 기본 방법이다.

